<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>kubeadm on ç‰å­æ³¡æ¸©æ³‰</title>
    <link>https://zecoo.github.io/hugo/tags/kubeadm/</link>
    <description>Recent content in kubeadm on ç‰å­æ³¡æ¸©æ³‰</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Sat, 16 May 2020 00:00:00 +0800</lastBuildDate>
    
	<atom:link href="https://zecoo.github.io/hugo/tags/kubeadm/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Kubeadm init node not found</title>
      <link>https://zecoo.github.io/hugo/posts/k8s/kubeadm-init-node-not-found/</link>
      <pubDate>Sat, 16 May 2020 00:00:00 +0800</pubDate>
      
      <guid>https://zecoo.github.io/hugo/posts/k8s/kubeadm-init-node-not-found/</guid>
      <description>æ–°å‘å“¦ï½
5å¤©éƒ½æ²¡æœ‰è§£å†³çš„æ–°å‘å“¦ï½
ç¯å¢ƒï¼š  åä¸ºäº‘å­¦ç”Ÿæœº2c4g é²²é¹é€šç”¨è®¡ç®—å¢å¼ºå‹ | kc1.large.2 | 2vCPUs | 4GB  é”™è¯¯ kubeadm init åå¡åœ¨ï¼š
[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory &amp;quot;/etc/kubernetes/manifests&amp;quot;. This can take up to 4m0s [kubelet-check] Initial timeout of 40s passed.  ç„¶åæŒ‰ç…§æç¤ºæŸ¥çœ‹kubeletçš„æ—¥å¿—ï¼Œæ˜¾ç¤ºâ€œnode xxx not foundâ€
node &amp;quot;ecs-kc1-large-2-linux-20200511105949&amp;quot; not found Container &amp;quot;408a5e9f9958dd3919cecf4a944a25ce30582bc638d657fc065fec8c56579f2a&amp;quot; not found in pod&#39;s containers k8s.io/kubernetes/pkg/kubelet/kubelet.go:453: Failed to list *v1.Node: Get https://192.168.0.214:6443/api/v1/nodes?fieldSelector=metadata.name%3Decs-kc1-large-2-linux-20200511105949&amp;amp;limit=500&amp;amp;resourceVersion=0: dial tcp 192.</description>
    </item>
    
    <item>
      <title>Kubeadm å®‰è£…è®°å½•</title>
      <link>https://zecoo.github.io/hugo/posts/k8s/kubeadm-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/</link>
      <pubDate>Tue, 28 Apr 2020 16:37:07 +0800</pubDate>
      
      <guid>https://zecoo.github.io/hugo/posts/k8s/kubeadm-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/</guid>
      <description>è£…å¥½çš„é‚£ä¸€ç¬é—´ï¼Œæˆ‘æ„ŸåŠ¨å¾—è¦å“­äº†ã€‚æˆ‘ç°åœ¨ä¹Ÿç®—åŠä¸ªk8sè¿ç»´å°èƒ½æ‰‹äº†å§ã€‚
å®‰è£…K8sæœ‰è¿™å‡ ç§æ–¹æ³•
 minikube mircok8s kubeadm  è¿™ä¸‰ç§æ–¹æ³•æˆ‘éƒ½ç”¨è¿‡ã€‚minikubeåœ¨winä¸Šä»¥è™šæ‹Ÿæœºçš„å½¢å¼è¿è¡Œï¼ŒæŒºéº»çƒ¦çš„è®²é“ç†ã€‚microk8sæ˜¯æœ€å‹å¥½çš„æ–¹å¼ï¼Œè§£å†³ä¸€ä¸ªæ‹‰é•œåƒçš„é—®é¢˜ï¼Œä¹Ÿå°±ä¸æˆé—®é¢˜äº†ã€‚kubeadmåº”è¯¥æ˜¯æœ€éº»çƒ¦çš„äº†ã€‚
å›å½’æ­£é¢˜ï¼Œè®°å½•æ•´ä¸ªå®‰è£…ä»¥åŠå¡«å‘çš„è¿‡ç¨‹ã€‚
é¦–å…ˆdockerè¦å®‰è£…ä¸Šã€‚
ç„¶åï¼Œkubeletã€kubeadmã€kubectlã€kubernetes-cniä¸€å¥—å®‰è£…ä¸‹æ¥ã€‚
æˆ‘ç°åœ¨æ‰çœ‹åˆ°å‚è€ƒ1ä¸­çš„ä¸€å¥è¯ï¼š
# æŒ‡å®šç‰ˆæœ¬å¦åˆ™éƒ½ä¼šé»˜è®¤å®‰è£…åº“ä¸­æœ€æ–°ç‰ˆæœ¬ï¼Œä¼šå› ä¸ºå½¼æ­¤ä¾èµ–çš„ç‰ˆæœ¬ä¸åŒå®‰è£…å¤±è´¥ $ yum install -y kubelet-1.13.1 kubeadm-1.13.1 kubectl-1.13.1 kubernetes-cni-0.6.0 # è®¾ç½®å¼€æœºå¯åŠ¨å¹¶å¯åŠ¨kubelet $ systemctl enable kubelet &amp;amp;&amp;amp; systemctl start kubelet  çœ‹åˆ°ç¬¬ä¸€å¥è¯äº†å—ï¼Ÿç»™æˆ‘å¤§å£°è¯»å‡ éï¼ï¼æˆ‘å°±æ˜¯å› ä¸ºè¿™ä¸ªï¼Œåƒäº†å¤šå°‘äºï¼Œæœç´¢å¤šå°‘èµ„æ–™ğŸ˜­ã€‚è¯·ä¸€å®šä¿è¯ä½ çš„kubeletã€kubeadmã€kubectlçš„ç‰ˆæœ¬ç›¸åŒã€‚
ç¬¬äºŒæ­¥ï¼Œkubeadm config images liståˆ—å‡ºæ‰€æœ‰éœ€è¦çš„imageï¼Œå› ä¸ºå›½å†…ç½‘ç»œé—®é¢˜å˜›ï¼Œä¸€æ ·çš„ã€‚ç„¶åç”¨ä»¥ä¸‹bashè„šæœ¬å®‰è£…å¥½ï¼Œdocke imagesæ£€æŸ¥ä¸€ä¸‹ã€‚
for i in `kubeadm config images list`; do imageName=${i#k8s.gcr.io/} docker pull registry.aliyuncs.com/google_containers/$imageName docker tag registry.aliyuncs.com/google_containers/$imageName k8s.gcr.io/$imageName docker rmi registry.aliyuncs.com/google_containers/$imageName done;  ç¬¬ä¸‰æ­¥ï¼Œkubeadm init --pod-network-cidr=10.244.0.0/16åˆå§‹åŒ–kubeadmã€‚è¿™ä¸€æ­¥æœ€é‡è¦çš„æ˜¯/etc/kubernetes/admin.confè¿™ä¸ªæ–‡ä»¶ã€‚è¿˜æœ‰åé¢é‚£ä¸ªå‚æ•°ï¼Œå¦‚æœä¸åŠ ä¸Šï¼Œå°±ä¼šé‡åˆ°æ–°çš„å‘å“¦ï½
initç»“æŸä¹‹åï¼Œä¸è¦å¿˜äº†æç¤ºçš„ä¸‰è¡Œå‘½ä»¤ï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼š
Unable to connect to the server: x509: certificate signed by unknown authority (possibly because of &amp;quot;crypto/rsa: verification error&amp;quot; while trying to verify candidate authority certificate &amp;quot;kubernetes&amp;quot;)  mkdir -p $HOME/.</description>
    </item>
    
  </channel>
</rss>